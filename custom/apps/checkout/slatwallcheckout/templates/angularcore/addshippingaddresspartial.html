<!-- Add Shipping Address Obj just to control state -->
<div class="col-md-12" ng-init="slatwall.OrderAddShippingObj = {}">

	<h4>Shipping</h4>

	<div class="row" ng-show="slatwall.shippingAddressErrors && slatwall.errors">
		<div class="col-sm-12">
		    <div class="msg" ng-repeat="(key, errors) in slatwall.shippingAddressErrors">
		        <div class="alert alert-danger"><i class="fa fa-info-circle"></i> {{errors[0]}}</div>
		    </div>
	    </div>
	</div>
	<!-- Displays available shipping methods. -->
	<swf-directive partial-name="shippingmethodoptiondisplay"></swf-directive>

	<!-- Displays all addresses from the addess book and lets you select one to use as the shipping address. -->

	<swf-directive partial-name="addshippingbyaccountaddresspartial" ng-show="slatwall.accountAddressEditFormIndex == undefined"></swf-directive>


	<!-- When an address needs to be saved. -->
	<div id="editaddress">
			<div ng-if="slatwall.showEditAccountAddressForm()">
				<span ng-init="slatwall.account.accountAddresses[slatwall.accountAddressEditFormIndex].address = slatwall.getAddressEntity(slatwall.account.accountAddresses[slatwall.accountAddressEditFormIndex].address)"></span>
				<h4>Edit Your Address:</h4>
				<sw-address-form
					data-field-list="countryCode,name,company,streetAddress,street2Address,locality,city,stateCode,postalCode,phoneNumber"
					data-slatwall-scope="slatwall"
					data-id="{{slatwall.account.accountAddresses[slatwall.accountAddressEditFormIndex].address.addressID}}" 
					data-address="slatwall.account.accountAddresses[slatwall.accountAddressEditFormIndex].address" 
					data-tab-index="1" 
					data-address-name="accountAddress" 
					data-field-name-prefix="accountAddresses[{{slatwall.accountAddressEditFormIndex}}]." 
					data-show-address-book-select="false" 
					data-show-country-select="true"
					data-show-submit-button="true"
					data-action="updateAddress,addOrderShippingAddress"
					data-action-text="Save and Continue"
					data-show-address-book-select="false" 
					data-event-listeners="{updateAddressSuccess:slatwall.hideAccountAddressForm,updateAddressFailure:slatwall.addShippingAddressErrors}"
					data-submit-on-enter="true">
				</sw-address-form>
			</div>
			
			<div ng-if="slatwall.showNewAccountAddressForm()">
				<h4>Create A New Address:</h4>
				<span ng-init="slatwall.newAddress = slatwall.$hibachi.newAddress()"></span>
				<sw-address-form
					data-field-list="countryCode,name,company,streetAddress,street2Address,locality,city,stateCode,postalCode,phoneNumber,accountAddressName"
					data-slatwall-scope="slatwall"
					data-address="slatwall.newAddress"
					data-tab-index="1" 
					data-address-name="accountAddress" 
					data-field-name-prefix="accountAddress.address." 
					data-show-address-book-select="false" 
					data-show-country-select="true" 
					data-show-submit-button="true"
					data-action="addNewAccountAddress,addShippingAddressUsingAccountAddress"
					data-action-text="Save and Continue"
					show-close-button="true"
					close-button-text="CLOSE"
					data-submit-on-enter="true"
					data-event-listeners="{addShippingAddressUsingAccountAddressSuccess:slatwall.hideAccountAddressForm, addShippingAddressUsingAccountAddressFailure:slatwall.addShippingAddressErrors}">
				</sw-address-form>
			</div>

	</sw-form>
	</div>
</div>